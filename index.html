<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora 3D - Precifica√ß√£o de Impress√£o</title>
    <meta name="description"
        content="Calculadora de Custos de Impress√£o 3D. Calcule o pre√ßo de venda dos seus projetos considerando material, energia, deprecia√ß√£o e m√£o de obra in business.">
    <meta name="keywords"
        content="impress√£o 3d, calculadora 3d, custo impress√£o 3d, precifica√ß√£o 3d, filamento, resina, pla, abs, or√ßamento 3d">
    <meta name="author" content="Elian">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://elian0108.github.io/calculadora-3d/">
    <meta property="og:title" content="Calculadora 3D - Precifica√ß√£o de Projetos">
    <meta property="og:description" content="Descubra o custo real das suas impress√µes 3D e defina pre√ßos justos.">
    <meta property="og:image" content="https://elian0108.github.io/calculadora-3d/assets/og-image.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://elian0108.github.io/calculadora-3d/">
    <meta property="twitter:title" content="Calculadora 3D - Precifica√ß√£o de Projetos">
    <meta property="twitter:description" content="Descubra o custo real das suas impress√µes 3D e defina pre√ßos justos.">
    <meta property="twitter:image" content="https://elian0108.github.io/calculadora-3d/assets/og-image.png">

    <link rel="canonical" href="https://elian0108.github.io/calculadora-3d/">

    <link rel="stylesheet" href="css/style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="assets/icon.svg">
    <meta name="theme-color" content="#1e293b">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://pagead2.googlesyndication.com https://tpc.googlesyndication.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https://pagead2.googlesyndication.com; frame-src https://googleads.g.doubleclick.net https://tpc.googlesyndication.com 'self';">
</head>

<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="logo">
                <h2>Calculadora 3D</h2>
            </div>
            <ul class="nav-links">
                <li class="active" data-target="dashboard">
                    <span>üè†</span> Dashboard
                </li>
                <li data-target="calculadora">
                    <span>üñ©</span> Calculadora
                </li>
                <li data-target="impressoras">
                    <span>üñ®Ô∏è</span> Impressoras
                </li>
                <li data-target="materiais">
                    <span>üßµ</span> Materiais
                </li>
                <li data-target="configuracoes">
                    <span>‚öôÔ∏è</span> Configura√ß√µes
                </li>
                <li data-target="guia">
                    <span>üìö</span> Guia
                </li>
            </ul>

            <div class="sidebar-footer">
                <button id="theme-toggle" class="btn-icon" aria-label="Alternar Tema">
                    üåô Modo Escuro
                </button>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="content">
            <!-- Dashboard Section -->
            <section id="dashboard" class="screen active">
                <header>
                    <h1>Dashboard</h1>
                    <button class="btn-primary" id="btn-new-print-shortcut">+ Nova Impress√£o</button>
                </header>
                <div class="stats-grid">
                    <div class="card stat-card">
                        <h3>Projetos</h3>
                        <p id="total-projects">0</p>
                    </div>
                    <div class="card stat-card">
                        <h3>Custo M√©dio</h3>
                        <p id="avg-cost">R$ 0,00</p>
                    </div>
                </div>
                <div class="ad-container">
                    <!-- AdSense Slot: Dashboard Top -->
                    <p>Publicidade</p>
                </div>
                <div class="recent-projects">
                    <h2>Recentes</h2>
                    <ul id="recent-list" class="list-group">
                        <!-- Items injected by JS -->
                        <li class="empty-state">Nenhum projeto salvo.</li>
                    </ul>
                </div>

                <!-- Educational Content Section -->
                <div class="educational-section">
                    <hr class="divider">
                    <h2>Entenda seus Custos</h2>

                    <article class="guide-card">
                        <h3>üí∞ Por que cobrar mais do que o custo do filamento?</h3>
                        <p>Muitos iniciantes cometem o erro de cobrar apenas o valor do material gasto (ex: R$ 0,10/g).
                            Por√©m, isso ignora custos invis√≠veis cruciais:</p>
                        <ul>
                            <li><strong>Energia El√©trica:</strong> Impressoras 3D ficam ligadas por horas ou dias. O
                                consumo deve entrar na conta.</li>
                            <li><strong>Deprecia√ß√£o:</strong> Sua impressora tem uma vida √∫til. Pe√ßas como bicos,
                                correias e a pr√≥pria placa m√£e sofrem desgaste. Voc√™ precisa cobrar uma fra√ß√£o do valor
                                da m√°quina a cada hora de uso para poder rep√¥-la no futuro.</li>
                            <li><strong>Falhas:</strong> Nem toda impress√£o d√° certo. Uma taxa de falha (ex: 10% a 20%)
                                deve ser embutida para cobrir impress√µes perdidas.</li>
                            <li><strong>M√£o de Obra:</strong> Seu tempo fatiando o modelo, preparando a mesa, trocando
                                filamento e dando acabamento vale dinheiro.</li>
                        </ul>
                    </article>

                    <article class="guide-card">
                        <h3>‚ö° Como calcular a energia?</h3>
                        <p>Para um c√°lculo exato, use um watt√≠metro. Por√©m, uma estimativa segura √©:</p>
                        <p><em>Pot√™ncia M√©dia (kW) x Horas de Impress√£o x Custo do kWh</em></p>
                        <p>Nossa calculadora j√° faz isso automaticamente baseado na pot√™ncia informada no cadastro da
                            impressora.</p>
                    </article>

                    <article class="guide-card">
                        <h3>üìâ O que √© Deprecia√ß√£o?</h3>
                        <p>Deprecia√ß√£o √© a perda de valor do seu equipamento ao longo do tempo. Se sua impressora custou
                            R$ 2.000,00 e dura cerca de 2.000 horas imprimindo, o custo de "aluguel" da m√°quina √© de R$
                            1,00 por hora. Adicionar uma taxa de manuten√ß√£o garante que voc√™ tenha caixa para reparos.
                        </p>
                    </article>
                </div>

                <div class="faq-section">
                    <h2>Perguntas Frequentes (FAQ)</h2>
                    <details>
                        <summary>Como saber o custo do kWh na minha cidade?</summary>
                        <p>Verifique sua conta de luz. Geralmente o valor gira em torno de R$ 0,80 a R$ 1,20 por kWh no
                            Brasil. O valor padr√£o da calculadora √© uma m√©dia nacional.</p>
                    </details>
                    <details>
                        <summary>Qual taxa de falha devo usar?</summary>
                        <p>Para impressoras bem calibradas, 5% a 10% √© razo√°vel. Para impress√µes complexas ou
                            arriscadas, considere 20% ou mais.</p>
                    </details>
                    <details>
                        <summary>Como definir minha m√£o de obra?</summary>
                        <p>Pense quanto voc√™ gostaria de ganhar por hora de trabalho focado. Se voc√™ gasta 30 minutos
                            preparando um arquivo, esse tempo deve ser cobrado proporcionalmente.</p>
                    </details>
                </div>
            </section>

            <!-- Calculator Section -->
            <section id="calculadora" class="screen">
                <header>
                    <h1>Calculadora de Custos</h1>
                </header>
                <div class="calculator-layout">
                    <form id="calc-form">
                        <div class="form-group">
                            <label>Nome do Projeto</label>
                            <input type="text" id="project-name" required placeholder="Ex: Benchy">
                        </div>

                        <div class="row">
                            <div class="form-group">
                                <label>Impressora</label>
                                <select id="calc-printer" required>
                                    <option value="">Selecione...</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Material</label>
                                <select id="calc-material" required>
                                    <option value="">Selecione...</option>
                                </select>
                            </div>
                        </div>

                        <div class="row">
                            <div class="form-group">
                                <label>Peso (g)</label>
                                <input type="number" id="calc-weight" step="0.01" required>
                            </div>
                            <div class="form-group">
                                <label>Tempo de Impress√£o</label>
                                <div class="time-inputs">
                                    <input type="number" id="calc-time-d" placeholder="D" min="0"
                                        title="Dias de impress√£o">
                                    <input type="number" id="calc-time-h" placeholder="H" min="0"
                                        title="Horas de impress√£o">
                                    <input type="number" id="calc-time-m" placeholder="M" min="0"
                                        title="Minutos de impress√£o">
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="form-group">
                                <label>M√£o de Obra (h) <span
                                        style="font-size:0.8em; color:var(--text-muted)">?</span></label>
                                <input type="number" id="calc-labor-time" step="0.1" value="0"
                                    title="Tempo gasto preparando/fatiando o arquivo e finalizando a pe√ßa">
                            </div>
                            <div class="form-group">
                                <label>Taxa de Falha (%) <span
                                        style="font-size:0.8em; color:var(--text-muted)">?</span></label>
                                <input type="number" id="calc-fail-rate" step="1" value="0"
                                    title="Margem de seguran√ßa para cobrir impress√µes que derem errado">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Custos Extras / Consum√≠veis (R$)</label>
                            <input type="number" id="calc-extras" step="0.01" value="0.00"
                                placeholder="Ex: Cola, Lixa, Tinta">
                        </div>

                        <button type="button" id="btn-calculate" class="btn-primary">Calcular</button>
                    </form>

                    <div class="results-panel">
                        <div class="chart-container">
                            <canvas id="costChart"></canvas>
                        </div>
                        <div class="cost-breakdown">
                            <div class="cost-row">
                                <span>Material</span>
                                <span id="res-material">R$ 0,00</span>
                            </div>
                            <div class="cost-row">
                                <span>Energia</span>
                                <span id="res-energy">R$ 0,00</span>
                            </div>
                            <div class="cost-row">
                                <span>Deprecia√ß√£o</span>
                                <span id="res-depreciation">R$ 0,00</span>
                            </div>
                            <div class="cost-row">
                                <span>M√£o de Obra</span>
                                <span id="res-labor">R$ 0,00</span>
                            </div>
                            <div class="cost-row">
                                <span>Extras</span>
                                <span id="res-extras">R$ 0,00</span>
                            </div>
                            <hr>
                            <div class="cost-row total">
                                <span>Custo Total</span>
                                <span id="res-total">R$ 0,00</span>
                            </div>
                            <div class="cost-row price">
                                <span>Pre√ßo Sugerido</span>
                                <span id="res-price">R$ 0,00</span>
                            </div>
                        </div>
                        <button id="btn-save-project" class="btn-secondary" disabled>Salvar Projeto</button>
                        <div class="ad-container" style="margin-top: 20px;">
                            <!-- AdSense Slot: Calculator Results -->
                            <p>Publicidade</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Printers Section -->
            <section id="impressoras" class="screen">
                <header>
                    <h1>Impressoras</h1>
                    <button class="btn-primary" id="btn-add-printer">+ Adicionar</button>
                </header>
                <div id="printers-list" class="grid-list">
                    <!-- Printers injected by JS -->
                </div>
            </section>

            <!-- Materials Section -->
            <section id="materiais" class="screen">
                <header>
                    <h1>Materiais</h1>
                    <button class="btn-primary" id="btn-add-material">+ Adicionar</button>
                </header>
                <div id="materials-list" class="grid-list">
                    <!-- Materials injected by JS -->
                </div>
            </section>

            <!-- Settings Section -->
            <section id="configuracoes" class="screen">
                <header>
                    <h1>Configura√ß√µes</h1>
                </header>
                <form id="settings-form">
                    <div class="form-group">
                        <label>Custo Energia (R$/kWh)</label>
                        <input type="number" id="conf-kwh" step="0.01">
                    </div>
                    <div class="form-group">
                        <label>Custo Hora M√£o de Obra (R$)</label>
                        <input type="number" id="conf-labor-cost" step="0.01">
                    </div>
                    <div class="form-group">
                        <label>Markup Padr√£o (%)</label>
                        <input type="number" id="conf-markup" step="1">
                    </div>
                    <button type="submit" class="btn-primary">Salvar Configura√ß√µes</button>
                </form>

                <hr style="margin: 30px 0; border: 0; border-top: 1px solid var(--border-color);">

                <h2>Dados</h2>
                <div class="row">
                    <button id="btn-export" class="btn-secondary">üì§ Exportar Backup (JSON)</button>
                    <button id="btn-import-trigger" class="btn-secondary">üì• Restaurar Backup</button>
                    <input type="file" id="file-import" accept=".json" style="display: none;">
                </div>
            </section>

            <!-- Guide Section (New) -->
            <section id="guia" class="screen">
                <header>
                    <h1>Guia de Precifica√ß√£o</h1>
                </header>
                <div class="guide-content">
                    <article>
                        <h2>Introdu√ß√£o √† Precifica√ß√£o na Impress√£o 3D</h2>
                        <p>A precifica√ß√£o correta √© a chave para transformar um hobby em um neg√≥cio sustent√°vel. Esta
                            ferramenta ajuda voc√™ a visualizar todos os componentes do custo.</p>
                        <p>Navegue pelo Dashboard para ver dicas r√°pidas ou use a calculadora para simular cen√°rios
                            reais.</p>
                        <h3>Passo a Passo:</h3>
                        <ol>
                            <li>Cadastre suas <strong>Impressoras</strong> informando consumo e valor.</li>
                            <li>Cadastre seus <strong>Materiais</strong> (filamentos ou resinas).</li>
                            <li>V√° em <strong>Configura√ß√µes</strong> e ajuste o custo de energia e sua m√£o de obra.</li>
                            <li>Use a <strong>Calculadora</strong> para criar or√ßamentos completos.</li>
                        </ol>
                    </article>
                </div>
            </section>

            <footer class="app-footer">
                <div class="footer-links">
                    <a href="about.html">Sobre N√≥s</a>
                    <a href="privacy.html">Pol√≠tica de Privacidade</a>
                    <a href="terms.html">Termos de Uso</a>
                    <a href="contact.html">Contato</a>
                </div>
                <p>&copy; 2024 Calculadora 3D. Vers√£o 1.1.0</p>
            </footer>
        </main>
    </div>

    <!-- Modals -->
    <div id="modal-printer" class="modal hidden">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Nova Impressora</h2>
            <form id="form-printer">
                <input type="hidden" id="printer-id">
                <div class="form-group">
                    <label>Nome</label>
                    <input type="text" id="printer-name" required>
                </div>
                <div class="form-group">
                    <label>Pre√ßo de Compra (R$)</label>
                    <input type="number" id="printer-price" step="0.01" required>
                </div>
                <div class="form-group">
                    <label>Consumo (kW)</label>
                    <input type="number" id="printer-consumption" step="0.001" required placeholder="Ex: 0.350">
                </div>
                <!-- Deprecia√ß√£o simplificada: Pre√ßo / Vida √ötil -->
                <div class="form-group">
                    <label>Vida √ötil estimada (Horas)</label>
                    <input type="number" id="printer-lifespan" value="2000" required>
                </div>
                <div class="form-group">
                    <label>Custo Manuten√ß√£o (%)</label>
                    <input type="number" id="printer-maintenance" value="10" placeholder="% sobre o valor">
                </div>
                <button type="submit" class="btn-primary">Salvar</button>
            </form>
        </div>
    </div>

    <div id="modal-material" class="modal hidden">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Novo Material</h2>
            <form id="form-material">
                <input type="hidden" id="material-id">
                <div class="form-group">
                    <label>Nome / Marca</label>
                    <input type="text" id="material-name" required>
                </div>
                <div class="form-group">
                    <label>Tipo</label>
                    <select id="material-type">
                        <option value="PLA">PLA</option>
                        <option value="ABS">ABS</option>
                        <option value="PETG">PETG</option>
                        <option value="TPU">TPU</option>
                        <option value="Resina">Resina</option>
                        <option value="Outro">Outro</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Pre√ßo do Rolo (R$)</label>
                    <input type="number" id="material-price" step="0.01" required>
                </div>
                <div class="form-group">
                    <label>Peso do Rolo (g)</label>
                    <input type="number" id="material-weight" value="1000" required>
                </div>
                <button type="submit" class="btn-primary">Salvar</button>
            </form>
        </div>
    </div>

    <script src="js/storage.js"></script>
    <script src="js/calculator.js"></script>
    <script src="js/app.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js')
                .then(reg => console.log('SW registered!', reg))
                .catch(err => console.log('SW failed', err));
        }
    </script>
</body>

</html>